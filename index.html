<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghibli Art Style Converter - April Fools!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        textarea::-webkit-scrollbar { display: none; }
        textarea { -ms-overflow-style: none; scrollbar-width: none; }
        .checkmark { display: inline-block; opacity: 0; transform: scale(0.5); animation: checkmark-appear 0.3s ease-out forwards; }
        @keyframes checkmark-appear { to { opacity: 1; transform: scale(1); } }
        /* Style for the example image */
        #example-image-container { transition: opacity 0.5s ease-in-out; }
    </style>
</head>
<body class="bg-gradient-to-br from-sky-100 via-green-50 to-yellow-50 min-h-screen flex flex-col items-center justify-center p-4 font-sans">

    <div id="main-content" class="w-full max-w-2xl text-center">
        <!-- Example Ghibli-style Image Display -->
        <div id="example-image-container" class="mb-6 rounded-lg shadow-lg overflow-hidden max-w-md mx-auto opacity-0">
             <img id="example-image" src="" alt="Example Ghibli-style Art" class="w-full h-auto object-cover">
        </div>

        <h1 class="text-3xl font-bold mb-2 text-gray-800">Ghibli Art Style Converter</h1>
        <h2 class="text-xl font-semibold text-teal-600 mb-3">Create unlimited Ghibli art for free!</h2>
        <p class="text-sm text-gray-600 mb-6">Join <span id="fooled-counter" class="font-bold">...</span> others who've tried our amazing AI!</p>

        <!-- Input Box Area -->
        <div id="input-area" class="bg-white rounded-xl shadow-md p-4 border border-gray-200 text-left">
            <div id="image-preview-container" class="relative hidden mb-2 w-24">
                 <img id="image-preview" src="" alt="Your image preview" class="w-24 h-24 object-cover rounded-md border border-gray-300">
                 <button id="remove-image-btn" class="absolute -top-2 -right-2 bg-black text-white rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold leading-none hover:bg-gray-700 focus:outline-none">Ã—</button>
             </div>
            <textarea id="prompt-input" rows="3" class="w-full p-2 text-gray-800 placeholder-gray-500 focus:outline-none focus:ring-0 border-none resize-none text-lg bg-transparent" placeholder="Upload an image & Ask anything..."></textarea>
            <div class="mt-3 flex items-center justify-between">
                <div class="flex items-center space-x-2">
                    <label for="file-input" class="cursor-pointer p-2 rounded-full hover:bg-gray-100 text-gray-600" title="Upload Image">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" /> </svg>
                    </label>
                    <input type="file" id="file-input" accept="image/*" class="hidden">
                    <button class="text-sm bg-gray-100 text-gray-700 px-4 py-1.5 rounded-full hover:bg-gray-200 flex items-center space-x-1 opacity-50 cursor-not-allowed" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /> </svg> <span>Search</span>
                    </button>
                    <button class="text-sm bg-gray-100 text-gray-700 px-4 py-1.5 rounded-full hover:bg-gray-200 flex items-center space-x-1 opacity-50 cursor-not-allowed" disabled>
                       <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-gray-500" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.566.379-1.566 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.566 2.6 1.566 2.978 0a1.532 1.532 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.532 1.532 0 01.947-2.287c1.566-.379 1.566-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106A1.532 1.532 0 0111.49 3.17zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /> </svg> <span>Reason</span>
                    </button>
                     <button class="text-sm bg-gray-100 text-gray-700 px-2 py-1.5 rounded-full hover:bg-gray-200 flex items-center justify-center w-8 h-8 opacity-50 cursor-not-allowed" disabled>
                       <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z" /> </svg>
                    </button>
                </div>
                <div class="flex items-center space-x-2">
                     <button class="p-2 rounded-full hover:bg-gray-100 text-gray-600 opacity-50 cursor-not-allowed" disabled title="Voice Input (Fake)">
                         <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <path stroke-linecap="round" stroke-linejoin="round" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z" /> </svg>
                     </button>
                    <button id="convert-btn" class="bg-gray-600 text-white rounded-full p-2 hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-40 disabled:cursor-not-allowed" disabled title="Convert (Requires Image)">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"> <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" /> </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Spinner State -->
    <div id="loading-spinner" class="hidden text-center mt-8">
        <svg class="animate-spin h-10 w-10 text-blue-500 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"> <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle> <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path> </svg>
        <p class="text-lg font-semibold text-gray-700 mt-3">Initializing conversion...</p>
    </div>

    <!-- Fake Processing Steps State -->
    <div id="processing-steps" class="hidden text-center mt-8 w-full max-w-md">
        <h3 class="text-xl font-semibold text-gray-800 mb-4">Processing Image...</h3>
        <ul class="space-y-2 text-left text-gray-700 bg-white p-4 rounded-lg shadow">
            <li id="step-1" class="opacity-50 flex items-center"><span class="checkmark hidden mr-2 text-green-500">âœ”</span> Analyzing image pixels...</li>
            <li id="step-2" class="opacity-50 flex items-center"><span class="checkmark hidden mr-2 text-green-500">âœ”</span> Applying Ghibli style AI model...</li>
            <li id="step-3" class="opacity-50 flex items-center"><span class="checkmark hidden mr-2 text-green-500">âœ”</span> Enhancing background details...</li>
             <li id="step-4" class="opacity-50 flex items-center"><span class="checkmark hidden mr-2 text-green-500">âœ”</span> Rendering final masterpiece...</li>
        </ul>
    </div>

    <!-- April Fools' Reveal State -->
    <div id="reveal-state" class="hidden text-center mt-8 p-6 bg-gradient-to-r from-yellow-200 via-red-200 to-pink-200 border border-red-300 rounded-lg shadow-xl max-w-lg">
        <h2 class="text-5xl font-bold text-red-600 mb-4 animate-bounce">APRIL FOOLS!</h2>
        <p class="text-xl text-gray-800 mb-3">Gotcha! ðŸ˜‰ Did you *really* think it was that easy?</p>
        <p class="text-md text-gray-700">This is just a fun prank. Real AI art takes a bit more work (and usually isn't free)!</p>
        <div class="mt-6 flex flex-col sm:flex-row justify-center items-center space-y-3 sm:space-y-0 sm:space-x-4">
             <button onclick="window.location.reload()" class="w-full sm:w-auto px-5 py-2 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out">Try Again?</button>
            <button id="share-btn" class="w-full sm:w-auto px-5 py-2 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition duration-150 ease-in-out flex items-center justify-center space-x-2">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"> <path d="M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z" /> </svg>
                 <span>Share the Prank!</span>
            </button>
        </div>
        <p id="share-feedback" class="text-sm text-green-700 mt-3 h-4"></p> <!-- Feedback area -->
    </div>

    <!-- === IMPORTANT: UPDATE PLACEHOLDERS BELOW === -->
    <!-- 1. Put your actual audio file name/path here -->
    <audio id="reveal-audio" src="funny-audio.mp3" preload="auto"></audio>

    <script>
        // === IMPORTANT: UPDATE PLACEHOLDERS BELOW ===
        // 2. Add paths to your Ghibli-style images here (relative paths for GitHub Pages)
        //    Create an 'images' folder in your repository and put them there.
        const exampleImageUrls = [
            'images/ghibli-style-1.jpg',
            'images/ghibli-style-2.jpg',
            'images/ghibli-style-3.png'
            // Add more image paths if you have them
        ];
        // === END OF PLACEHOLDERS ===


        const fileInput = document.getElementById('file-input');
        const imagePreview = document.getElementById('image-preview');
        const imagePreviewContainer = document.getElementById('image-preview-container');
        const removeImageBtn = document.getElementById('remove-image-btn');
        const convertBtn = document.getElementById('convert-btn');
        const promptInput = document.getElementById('prompt-input');

        const mainContentDiv = document.getElementById('main-content');
        const loadingSpinnerDiv = document.getElementById('loading-spinner');
        const processingStepsDiv = document.getElementById('processing-steps');
        const revealStateDiv = document.getElementById('reveal-state');
        const revealAudio = document.getElementById('reveal-audio');
        const fooledCounterSpan = document.getElementById('fooled-counter');
        const exampleImageContainer = document.getElementById('example-image-container');
        const exampleImage = document.getElementById('example-image');
        const shareButton = document.getElementById('share-btn');
        const shareFeedback = document.getElementById('share-feedback');

        let imageUploaded = false;
        let fooledCount = parseInt(localStorage.getItem('fooledCount') || Math.floor(10000 + Math.random() * 5000).toString()); // Start random high number

        function updateCounter() {
            fooledCounterSpan.textContent = fooledCount.toLocaleString();
            localStorage.setItem('fooledCount', fooledCount.toString());
        }

        function checkEnableConvertButton() {
            convertBtn.disabled = !imageUploaded;
        }

        function showProcessingStep(stepId, delay) {
             return new Promise(resolve => {
                setTimeout(() => {
                    const stepElement = document.getElementById(stepId);
                    const checkmark = stepElement.querySelector('.checkmark');
                    if (stepElement) {
                        stepElement.classList.remove('opacity-50');
                        stepElement.classList.add('opacity-100', 'transition-opacity', 'duration-500');
                    }
                    if(checkmark) {
                        checkmark.classList.remove('hidden');
                        void checkmark.offsetWidth; // Reflow
                        checkmark.classList.add('checkmark');
                    }
                    resolve();
                }, delay);
            });
        }

        function displayRandomExampleImage() {
            if (exampleImageUrls.length > 0) {
                const randomIndex = Math.floor(Math.random() * exampleImageUrls.length);
                exampleImage.src = exampleImageUrls[randomIndex];
                // Fade in the image container
                 setTimeout(() => { // Add slight delay for effect if needed
                    exampleImageContainer.classList.remove('opacity-0');
                 }, 100);
            } else {
                // Hide container if no images are provided
                exampleImageContainer.style.display = 'none';
                console.warn("No example image URLs provided in the 'exampleImageUrls' array.");
            }
        }

        async function handleShare() {
            const shareData = {
                title: 'Ghibli Art Prank!',
                text: 'Check out this amazing Ghibli art converter! ðŸ˜‰',
                url: window.location.href // Use the current page URL
            };
            try {
                if (navigator.share) { // Use Web Share API if available
                    await navigator.share(shareData);
                    shareFeedback.textContent = 'Shared successfully!';
                } else if (navigator.clipboard) { // Fallback to Copy Link
                     await navigator.clipboard.writeText(window.location.href);
                     shareFeedback.textContent = 'Link copied to clipboard!';
                     // Optionally change button text temporarily
                     const originalButtonText = shareButton.querySelector('span').textContent;
                     shareButton.querySelector('span').textContent = 'Copied!';
                     setTimeout(() => {
                         shareButton.querySelector('span').textContent = originalButtonText;
                         shareFeedback.textContent = ''; // Clear feedback after a while
                     }, 2500);

                } else {
                     shareFeedback.textContent = 'Sharing not supported on this browser.'; // Basic fallback
                }
            } catch (err) {
                console.error('Share failed:', err);
                shareFeedback.textContent = 'Could not share or copy link.';
            }
            // Clear feedback after a few seconds if it wasn't the copy feedback
            if (!navigator.clipboard || !navigator.share) {
                 setTimeout(() => { shareFeedback.textContent = ''; }, 3000);
            }
        }

        // --- Event Listeners ---
        fileInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file && file.type.startsWith('image/')) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    imagePreview.src = e.target.result;
                    imagePreviewContainer.classList.remove('hidden');
                    imageUploaded = true;
                    checkEnableConvertButton();
                }
                reader.readAsDataURL(file);
            } else if (file) {
                alert("Oops! Please select an image file (jpg, png, gif, etc.).");
                fileInput.value = null;
            }
        });

        removeImageBtn.addEventListener('click', () => {
            fileInput.value = null;
            imagePreview.src = '';
            imagePreviewContainer.classList.add('hidden');
            imageUploaded = false;
            checkEnableConvertButton();
        });

        convertBtn.addEventListener('click', async () => {
            if (!imageUploaded) return;

            fooledCount++;
            updateCounter();

            mainContentDiv.classList.add('hidden');
            loadingSpinnerDiv.classList.remove('hidden');

            await new Promise(resolve => setTimeout(resolve, 1500));
            loadingSpinnerDiv.classList.add('hidden');
            processingStepsDiv.classList.remove('hidden');

            await showProcessingStep('step-1', 500);
            await showProcessingStep('step-2', 1000);
            await showProcessingStep('step-3', 1000);
            await showProcessingStep('step-4', 1200);
            await new Promise(resolve => setTimeout(resolve, 800));

            processingStepsDiv.classList.add('hidden');
            revealStateDiv.classList.remove('hidden');
            revealAudio.play().catch(error => console.warn("Audio autoplay failed:", error));
        });

        shareButton.addEventListener('click', handleShare);


        // --- Initial Page Load Actions ---
        displayRandomExampleImage(); // Show an example image on load
        updateCounter();
        checkEnableConvertButton();

    </script>

</body>
</html>
